cmake_minimum_required(VERSION 3.2.2)
project(fey)

file(GLOB SOURCES "src/*.cpp")
add_executable(fey ${SOURCES})

set(LINKED_LIBRARIES glfw)
set(DATA_DESTINATION .)
set(COPY_DATA feyData)
if(UNIX)
  set(LINKED_LIBRARIES ${LINKED_LIBRARIES} GL GLEW)
  set(GCC_COMPILE_FLAGS "-O3 -g -std=c++11")
  add_definitions(${GCC_COMPILE_FLAGS})
elseif(WIN32)
  set(LINKED_LIBRARIES ${LINKED_LIBRARIES} opengl32 glew32)
  set(DATA_DESTINATION Debug)
  set(COPY_DATA ${COPY_DATA} lib/glew32.dll)
endif()
target_link_libraries(fey ${LINKED_LIBRARIES})

file(COPY ${COPY_DATA} DESTINATION ${DATA_DESTINATION})
install(TARGETS fey DESTINATION games)
install(DIRECTORY feyData DESTINATION games DIRECTORY_PERMISSIONS WORLD_READ WORLD_WRITE WORLD_EXECUTE)